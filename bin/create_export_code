#!/usr/bin/perl -w

use strict;
use warnings;

my @export;

# this will match any function or variable
# being mapped in the symbol table that is
# not an internal swig wrapper
my $regex = qr/^\*(?!swig_)([^=]+)\s*=/;

while(<>){
    push @export, $1 if /$regex/;
}
print build_code(\@export);

sub build_code {
    my ($export,$tags) = @_;

    return q!
%perlcode %{
@EXPORT_OK = qw/
               ! . join ("\n" . (' 'x15), @$export) . q!
             /;
%EXPORT_TAGS = ( all => [ @EXPORT_OK ] );
%}
!;

}
